<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
    <title>–ú–∞—Ä—à—Ä—É—Ç ‚Äî –ø—Ä–æ—Ç–æ—Ç–∏–ø</title>

    <style>
      :root{
        --app-padding: 12px;
      }
      body{background: #f1f1f1;}

      /* –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´–∞–≤—Ç–æ–±—É—Å + –≤—Ä–µ–º—è¬ª */
      .route-card .item-title{font-weight:700}
      .bus-chip{display:inline-flex;align-items:center;gap:.35rem;padding:.15rem .55rem;border-radius:.5rem;background:#f1f1f1;color:#1b5cff;font-weight:700}
      .bus-chip small{font-weight:600;opacity:.7}
      .eta-dot{width:.55rem;height:.55rem;border-radius:50%;background:#27ae60;display:inline-block;margin-right:.35rem;box-shadow:0 0 0 4px rgba(6, 212, 41, 0.247)}

      /* –ë–ª–æ–∫ –≤–∞–≥–æ–Ω–∞/–¥–≤–µ—Ä–µ–π */
      .coach{position:relative;display:flex;align-items:center;gap:.35rem;margin:10px 0;padding:10px;border-radius:12px;background:#fff;border:1px solid #e9edf5;}
      .coach .wagon{position:relative;flex:1;height:38px;border-radius:10px;background:linear-gradient(180deg,#fafcff,#eef2f9);border:1px solid #dde3ef;display:flex;justify-content:space-between;align-items:center;padding:0 12px;}
      .coach .wagon::after{content:"";position:absolute;inset:0;border-radius:10px;box-shadow:inset 0 1px 0 rgba(255,255,255,.8);}
      .coach .wagon .door{width:22%;height:70%;border-radius:6px;border:1px dashed #cbd6ea;display:flex;align-items:center;justify-content:center;opacity:.9}
      .coach .wagon .door i{font-style:normal;font-size:.65rem;color:#8a99b5}

      /* –ó–µ–ª—ë–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–≤–µ—Ä–∏ */
      .entrance-pointer{position:absolute;top:-8px;height:54px;width:54px;border-radius:12px;border:1px solid #e1efea;background:#f4fbf8;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px rgba(0,0,0,.06);transition:transform .45s cubic-bezier(.25,.8,.25,1), opacity .25s ease;}
      .entrance-pointer .dot{width:12px;height:12px;border-radius:50%;background:#2ecc71;box-shadow:0 0 0 4px rgba(46,204,113,.15)}

      /* –ü–æ–∑–∏—Ü–∏–∏ (1..3) ‚Äî –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é */
      .coach{--x:0%}
      .coach .entrance-pointer{left:calc(8% + var(--x));}
      .coach{border: none !important;border-radius: 0; box-shadow: none !important;}

      /* –†—è–¥ —Å –º–∏–Ω–∏-—Å—Ö–µ–º–æ–π –∞–≤—Ç–æ–±—É—Å–∞ */
      .bus-row{
        display:flex;
        align-items:center;
        justify-content:flex-start;
        gap:12px;
        margin:6px 0 35px 0;
      }

      /* –°–∞–º –∞–≤—Ç–æ–±—É—Å –∫–∞–∫ —Ñ–æ–Ω (inline SVG, –æ—Ñ–ª–∞–π–Ω) */
      .bus-schematic{
        position:relative;
        width:120px;
        height:28px;
        background-repeat:no-repeat;
        background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 28'><rect x='2' y='5' rx='4' ry='4' width='110' height='18' fill='%23d5d9df'/><rect x='10' y='9' width='12' height='10' fill='%23f1f1f1'/><rect x='42' y='9' width='12' height='10' fill='%23f1f1f1'/><rect x='74' y='9' width='12' height='10' fill='%23f1f1f1'/><circle cx='26' cy='24' r='4' fill='%239aa0a6'/><circle cx='95' cy='24' r='4' fill='%239aa0a6'/></svg>");
      }

      /* –ù–µ–≤–∏–¥–∏–º—ã–µ ¬´—Å–ª–æ—Ç—ã¬ª –¥–≤–µ—Ä–µ–π –ø–æ–≤–µ—Ä—Ö —Å—Ö–µ–º—ã */
      .bus-schematic .door{
        position:absolute;
        top:8px;
        width:12px;
        height:12px;
        border-radius:2px;
        transition: all 0.45s cubic-bezier(.25,.8,.25,1);
      }
      /* –ü–æ–∑–∏—Ü–∏–∏ –¥–≤–µ—Ä–µ–π: –¥–≤–µ—Ä—å 1 —Å–ª–µ–≤–∞, –¥–≤–µ—Ä—å 3 —Å–ø—Ä–∞–≤–∞ */
      .bus-schematic .door.door-back{ left:10px; }     /* —Å–ª–µ–≤–∞ - –ó–ê–î–ù–Ø–Ø */
      .bus-schematic .door.door-middle{ left:42px; }   /* —Ü–µ–Ω—Ç—Ä - –°–†–ï–î–ù–Ø–Ø */
      .bus-schematic .door.door-front{ left:74px; }    /* —Å–ø—Ä–∞–≤–∞ - –ü–ï–†–ï–î–ù–Ø–Ø */

      /* –ü–æ–¥—Å–∫–∞–∑–∫–∞ ¬´—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–≤–µ—Ä—å¬ª */
      .bus-schematic .door.suggested{
        outline:2px solid #10b981;
        outline-offset:2px;
        transform: scale(1.2);
      }

      /* –ë–µ–π–¥–∂ –º–∞—Ä—à—Ä—É—Ç–∞ ¬´734¬ª —Å–æ –∑–µ–ª—ë–Ω—ã–º –±—É–ª–ª–µ—Ç–æ–º —Å–ø—Ä–∞–≤–∞ */
      .route-mini-chip{
        display:inline-flex; align-items:center; gap:8px;
        height:26px; padding:0 10px;
        background:#f1f1f1; border-radius:8px; font-weight:700;
        color:#0f172a;
      }
      .route-mini-chip .dot{
        width:10px; height:10px; border-radius:50%;
        background:#10b981; box-shadow:0 0 0 4px rgba(16,185,129,.18);
      }

      /* –í—Ä–µ–º—è —Å–ø—Ä–∞–≤–∞ –æ—Ç —Ä—è–¥–∞ */
      .bus-row .eta{
        margin-left:auto;
        font-weight:600;
        color:#16a34a;
        padding-right: 9px;
      }

      /* –ì–ª–∞–¥–∫–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –≤—ã–±–æ—Ä–∞ */
      .seg-control .button{min-width:46px}

      /* –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ */
      .section-title{font-size:.8rem;color:#000000;margin:6px 0 4px 2px}

      /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
      .image-form {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
      }

      .form-group {
        margin-bottom: 12px;
      }

      .form-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
        color: #374151;
        font-size: 14px;
      }

      .form-group input, .form-group select {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        font-size: 14px;
        background: #fff;
      }

      .form-group input:focus, .form-group select:focus {
        outline: none;
        border-color: #0ea5e9;
        box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
      }

      .gate-positions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .gate-checkbox {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .gate-checkbox input[type="checkbox"] {
        width: auto;
        margin: 0;
      }

      .remove-image-btn {
        background: #ef4444;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 4px 8px;
        font-size: 12px;
        cursor: pointer;
        margin-top: 8px;
      }

      .remove-image-btn:hover {
        background: #dc2626;
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–æ–∑–∏—Ü–∏–π –≤–æ—Ä–æ—Ç */
      .gate-order-list {
        margin-top: 8px;
        padding: 8px;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        min-height: 40px;
      }

      .gate-order-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        margin: 4px 0;
        background: #fff;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        cursor: move;
        transition: all 0.2s ease;
        user-select: none;
      }

      .gate-order-item:hover {
        background: #f1f5f9;
        border-color: #0ea5e9;
      }

      .gate-order-item.dragging {
        opacity: 0.5;
        transform: rotate(5deg);
      }

      .gate-order-item .drag-handle {
        color: #6b7280;
        font-size: 14px;
        cursor: grab;
      }

      .gate-order-item .drag-handle:active {
        cursor: grabbing;
      }

      .gate-order-item .gate-number {
        background: #0ea5e9;
        color: white;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 600;
      }

      .gate-order-item .gate-label {
        flex: 1;
        font-weight: 500;
      }

      .gate-order-item .remove-gate {
        background: #ef4444;
        color: white;
        border: none;
        border-radius: 4px;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        cursor: pointer;
      }

      .gate-order-item .remove-gate:hover {
        background: #dc2626;
      }

      .gate-order-placeholder {
        border: 2px dashed #cbd5e1;
        background: #f7fafc;
        border-radius: 6px;
        padding: 8px;
        text-align: center;
        color: #64748b;
        font-size: 14px;
        margin: 4px 0;
      }
    </style>
    <style>
      html,body{margin:0;padding:0}
      body{font:16px/1.35 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,ui-sans-serif,system-ui; color:#1f2937; background:#f1f1f1}
      .navbar{position:sticky; top:0; background:#ffffff; z-index:20; box-shadow:0 4px 12px rgba(0,0,0,0.08); border-bottom:none;}
      .navbar .navbar-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
      .title{font-weight:700}
      .page-content{padding-bottom:24px}
      .block{padding:12px 16px; max-width: 83%}
      .card{background:#f1f1f1;border:none;border-radius:16px;box-shadow:0 6px 16px rgba(24,39,75,.06)}
      .card-content{padding:14px}
      .elevation-3{box-shadow:0 8px 24px rgba(30,41,59,.06)}

      /* Flex utilities */
      .display-flex { display: flex; }
      .justify-content-space-between { justify-content: space-between; }
      .align-items-center { align-items: center; }

      /* –ö–Ω–æ–ø–∫–∏ / —Å–µ–≥–º–µ–Ω—Ç—ã */
      .segmented{display:inline-flex;gap:8px}
      .button{display:inline-flex;align-items:center;justify-content:center;min-width:42px;padding:8px 12px;border-radius:12px;border:1px solid #dbe3f1;background:#fff;text-decoration:none;color:#0f172a;font-weight:600;box-shadow:0 1px 0 rgba(255,255,255,.6), inset 0 -1px 0 rgba(0,0,0,.03)}
      .button-active{background:#0ea5e9;color:#fff;border-color:#0ea5e9}

      /* –°—Å—ã–ª–∫–∏ */
      a{color:#2563eb;text-decoration:none}
      a:hover{text-decoration:underline}

      /* –ú–µ–ª–∫–∏–µ —Ç–µ–∫—Å—Ç—ã */
      .text-color-gray{color:#6b7280;padding: 7px 0;}
      .text-color-green{color:#16a34a}

      /* ====== –£–ª—É—á—à–µ–Ω–Ω—ã–π –≤–∏–∑—É–∞–ª ¬´–≤–∞–≥–æ–Ω–∞¬ª ====== */
      .coachwrap{margin-top:8px}
      .coach{--x:36%; position:relative;display:flex;align-items:center;gap:10px;margin:10px 0;padding:12px;border-radius:16px;background:#fff;border:1px solid #e9edf5;box-shadow:0 6px 14px rgba(30,41,59,.05)}
      .coach .wagon{position:relative;flex:1;height:48px;border-radius:12px;background:linear-gradient(180deg,#fdfefe,#eef3fb);border:1px solid #d9e2f1;display:flex;justify-content:space-between;align-items:center;padding:0 14px}
      .coach .wagon::after{content:"";position:absolute;inset:0;border-radius:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,.85)}
      .coach .door{width:22%;height:70%;border-radius:8px;border:1px dashed #c6d3eb;display:flex;align-items:center;justify-content:center;opacity:.95;background:rgba(255,255,255,.6)}
      .coach .door i{font-style:normal;font-size:.75rem;color:#7b8aa6}
      .entrance-pointer{position:absolute;top:-10px;left:calc(8% + var(--x));height:58px;width:58px;border-radius:14px;border:1px solid #d4efe4;background:#f0fbf6;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 18px rgba(16,185,129,.18);transition:transform .45s cubic-bezier(.25,.8,.25,1),left .45s cubic-bezier(.25,.8,.25,1), opacity .25s ease}
      .entrance-pointer .dot{width:12px;height:12px;border-radius:50%;background:#10b981;box-shadow:0 0 0 6px rgba(16,185,129,.18)}

      /* –ö–∞—Ä—Ç–æ—á–∫–∞ —à–∞–ø–∫–∏ */
      .bus-chip{display:inline-flex;align-items:center;gap:.35rem;padding:.15rem .6rem;border-radius:.6rem;background:#1375fa;color:#fff;font-weight:800}
      .eta-dot{width:.55rem;height:.55rem;border-radius:50%;background:#16a34a;display:inline-block;margin-right:.35rem}

      .section-title {font-family: 'Roboto', sans-serif; font-size: 18px; font-weight: 400; color: #000000; margin: 25px 0 20px 2px;}
      .block-title{padding:4px 16px;margin-top:10px;font-weight:700}
      .list.inset{margin:10px 16px;background:#fff;border:1px solid #e6ebf5;border-radius:16px}
      .list.inset ul{list-style:none;margin:0;padding:0}
      .list.inset li{padding:12px 16px}

      /* ====== –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥ ====== */
      body{padding:24px}
      #app{max-width:420px;max-height: 530px;margin:0 auto;border:1px solid #e5e7eb;border-radius:24px;overflow:hidden;background:#fff;box-shadow:0 18px 48px rgba(15,23,42,.12)}
      .view-main{height:auto;}
      @media (max-width:460px){body{padding:8px};#app{max-width:100%;border-radius:16px}}

      /* ====== Navbar ====== */
      .navbar{position:sticky;top:0;background:#ffffff;border-bottom:1px solid #e5e7eb;z-index:20}
      .navbar-inner{display:flex;align-items:center;justify-content:space-between;padding:10px 14px}
      .navbar-inner.two-line{padding:10px 12px 8px;position:relative;min-height:52px;}
      .title-area{position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);text-align:center;line-height:1.1;pointer-events:none;}
      .title-main{font-weight:700;font-size:1rem;color:#0f172a;}
      .title-sub{margin-top:4px;font-size:.85rem;color:#6b7280;}
      .back-btn{position:relative;display:inline-flex;align-items:center;justify-content:center;width:45px !important;height:45px !important;border-radius:12px;background-color:#f1f1f1 !important;border:none;color:#111827;text-decoration:none;pointer-events:none;}
      .back-btn::before{content:"";display:block;width:9px;height:9px;border-left:2px solid #6b7280;border-bottom:2px solid #6b7280;transform:rotate(45deg);}
      .back-btn:hover{background:#f7f7fa}

      /* ====== –°—Ä–µ–¥–Ω—è—è –∑–æ–Ω–∞ –ø–æ–¥ —Ç–æ–ø–±–∞—Ä–æ–º ====== */
      .page-content{position:relative;background:#f1f1f1;padding:12px;min-height:100vh;}
      .page-content::before{content:"";position:absolute;left:12px;right:12px;top:0;background:#ffffff;border-radius:0 0 20px 20px;box-shadow:0 8px 24px rgba(15,23,42,.06);z-index:0;bottom:12px;}
      .page-content > *{position:relative;z-index:2}
      .page-content .block{padding-left:42px;padding-right:12px}

      /* –°–∏–Ω–∏–π —Ç–∞–π–º–ª–∞–π–Ω —Å–ª–µ–≤–∞ */
      .timeline{position:absolute;z-index:1;left:35px;top:0;height:408px;width:8px}
      .timeline:after{content:"";position:absolute;left:2px;top:0;height:408px;width:5px;background:#0d64f2;border-radius:2px}
      .timeline .dot{position:absolute;left:50%;transform:translateX(-50%);width:10px;height:10px;border-radius:50%;background:#0d64f2;box-shadow:0 0 0 4px rgb(255, 255, 255);z-index: 2;}
      .navbar {border-bottom: none !important;}

      /* –ë–ª–æ–∫ "1 –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ ¬∑ 4 –º–∏–Ω" */
      .stop-summary{
        position: relative;
        padding-top: 22px;
        padding-bottom: 22px;
        margin: 0;
      }

      .stop-summary::before,
      .stop-summary::after{
        content: "";
        position: absolute;
        left: 16px;
        right: 16px;
        height: 1px;
        background: #e9edf5;
      }
      .stop-summary::before{ top: 0; }
      .stop-summary::after{ bottom: 0; }

      .stop-summary .ss-row{
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 0 16px;
      }

      .stop-summary .acc-arrow{
        display: inline-block;
        width: 10px;
        height: 10px;
        border-right: 2px solid #98a2b3;
        border-bottom: 2px solid #98a2b3;
        transform: rotate(45deg);
        margin-right: 6px;
        opacity: .9;
        position: relative;
        top: -3px;
      }
    </style>
  </head>

  <body>
    <div id="app">
      <div class="view view-main">
        <div class="page">
          <div class="navbar navbar-fixed">
            <div class="navbar-inner two-line">
              <div class="left">
                <a href="#" class="back-btn" aria-disabled="true" title="–ù–∞–∑–∞–¥" tabindex="-1"></a>
              </div>
              <div class="title-area">
                <div class="title-main">1 —á 10 –º–∏–Ω</div>
                <div class="title-sub">2 –ø–µ—Ä–µ—Å–∞–¥–∫–∏ ¬∑ 15:26</div>
              </div>
              <div class="right"></div>
            </div>
          </div>

          <div class="page-content">
            <div class="timeline">
              <span class="dot" style="top:313px"></span>
              <span class="dot" style="bottom:0px"></span>
            </div>
            <div class="block" style="padding:var(--app-padding); padding-left:50px">
              <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —à–∞–≥–∞ —Å –∞–≤—Ç–æ–±—É—Å–æ–º -->
              <div class="card route-card elevation-3">
                <div class="card-content card-content-padding">
                  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                      <div class="bus-chip">507</div>
                      <div class="item-title">–ê–≤—Ç–æ–±—É—Å</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px;">
                      <span class="eta-dot"></span>
                      <span class="text-color-green">6 –º–∏–Ω</span>
                    </div>
                  </div>
                  <div class="text-color-gray">
                    –í —Å—Ç–æ—Ä–æ–Ω—É ¬´–ú–µ—Ç—Ä–æ –°–∞–ª–∞—Ä—å–µ–≤–æ¬ª<br>
                    –°–ª–µ–¥—É—é—â–∏–π —á–µ—Ä–µ–∑ <span class="text-color-green">26 –º–∏–Ω</span>
                  </div>
                </div>
              </div>

              <!-- –¢–µ–∫—Å—Ç –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è -->
              <div class="section-title" id="boardingText">–°–∞–¥–∏—Ç–µ—Å—å –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É –∞–≤—Ç–æ–±—É—Å–∞</div>

              <!-- –ú–∏–Ω–∏-—Å—Ö–µ–º–∞ –∞–≤—Ç–æ–±—É—Å–∞ -->
              <div class="bus-row">
                <div class="bus-schematic" aria-label="–°—Ö–µ–º–∞ –∞–≤—Ç–æ–±—É—Å–∞">
                  <span class="door door-back" id="door-back"></span>
                  <span class="door door-middle" id="door-middle"></span>
                  <span class="door door-front" id="door-front"></span>
                </div>

                <div class="route-mini-chip">
                  <span class="num">734</span>
                  <span class="eta-dot" aria-hidden="true"></span>
                </div>

                <div class="eta">24 –º–∏–Ω</div>
              </div>

              <!-- –ë–ª–æ–∫ "1 –æ—Å—Ç–∞–Ω–æ–≤–∫–∞" –æ—Å—Ç–∞–µ—Ç—Å—è –ù–ï–ò–ó–ú–ï–ù–ù–´–ú -->
              <div class="stop-summary">
                <div class="ss-row">
                  <span class="acc-arrow" aria-hidden="true"></span>
                  <a href="#" class="ss-link">1 –æ—Å—Ç–∞–Ω–æ–≤–∫–∞</a>
                  <span class="ss-sep">¬∑</span>
                  <span class="text-color-gray">4 –º–∏–Ω</span>
                </div>
              </div>

              <div class="section-title" style="display: flex; justify-content: space-between; align-items: center;">
                <div>–ú–µ—Ç—Ä–æ –°–∞–ª–∞—Ä—å–µ–≤–æ</div>
                <div class="text-color-gray" style="padding-right: 9px;">14:25</div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

<!-- ======= –ë–ª–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π ======= -->
		<div id="uploader-section" style="margin-top: 25px; padding: 18px; background: #f9fafb; border-radius: 14px; border: 1px solid #e5e7eb;">
			<h3 style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–ê–Ω–∞–ª–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏</h3>
			<input type="file" id="imageInput" multiple accept="image/*" style="margin-bottom: 10px;">
			<div id="preview" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px;"></div>
			<button id="sendBtn" disabled style="padding: 8px 14px; border: none; border-radius: 10px; background-color: #0ea5e9; color: white; font-weight: 600; cursor: pointer;">
				–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
			</button>
		</div>

		<script>
			const input = document.getElementById('imageInput');
			const preview = document.getElementById('preview');
			const sendBtn = document.getElementById('sendBtn');
			let imageData = [];

			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ä–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
			function createImageForm(file, index) {
				const formDiv = document.createElement('div');
				formDiv.className = 'image-form';
				formDiv.innerHTML = `
					<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
						<img src="${URL.createObjectURL(file)}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
						<div style="flex: 1;">
							<div style="font-weight: 600; margin-bottom: 4px;">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${index + 1}</div>
							<div style="font-size: 12px; color: #6b7280;">${file.name}</div>
						</div>
						<button type="button" class="remove-image-btn" onclick="removeImage(${index})">–£–¥–∞–ª–∏—Ç—å</button>
					</div>
					
					<div class="form-group">
						<label for="cam_info_${index}">–¢–∏–ø –∫–∞–º–µ—Ä—ã:</label>
						<select id="cam_info_${index}" onchange="updateImageData(${index})">
							<option value="frontal">–§—Ä–æ–Ω—Ç–∞–ª—å–Ω–∞—è</option>
							<option value="side">–ë–æ–∫–æ–≤–∞—è</option>
							<option value="rear">–ó–∞–¥–Ω—è—è</option>
						</select>
					</div>
					
					<div class="form-group">
						<label for="cam_num_${index}">–ù–æ–º–µ—Ä –∫–∞–º–µ—Ä—ã:</label>
						<input type="number" id="cam_num_${index}" value="1" min="1" max="10" onchange="updateImageData(${index})">
					</div>
					
					<div class="form-group">
						<label>–ü–æ–∑–∏—Ü–∏–∏ –≤—Ö–æ–¥–æ–≤ (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ):</label>
						<div class="gate-positions">
							<div class="gate-checkbox">
								<input type="checkbox" id="gate_1_${index}" value="1" onchange="updateImageData(${index})">
								<label for="gate_1_${index}">1</label>
							</div>
							<div class="gate-checkbox">
								<input type="checkbox" id="gate_2_${index}" value="2" onchange="updateImageData(${index})" checked>
								<label for="gate_2_${index}">2</label>
							</div>
							<div class="gate-checkbox">
								<input type="checkbox" id="gate_3_${index}" value="3" onchange="updateImageData(${index})">
								<label for="gate_3_${index}">3</label>
							</div>
							<div class="gate-checkbox">
								<input type="checkbox" id="gate_4_${index}" value="4" onchange="updateImageData(${index})">
								<label for="gate_4_${index}">4</label>
							</div>
						</div>
					</div>

					<div class="form-group">
						<label>–ü–æ—Ä—è–¥–æ–∫ –ø–æ–∑–∏—Ü–∏–π –≤—Ö–æ–¥–æ–≤ (–ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞):</label>
						<div class="gate-order-list" id="gate-order-${index}">
							<div class="gate-order-placeholder">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Ö–æ–¥–æ–≤ –≤—ã—à–µ</div>
						</div>
					</div>
				`;
				return formDiv;
			}

			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
			function updateImageData(index) {
				const camInfo = document.getElementById(`cam_info_${index}`).value;
				const camNum = parseInt(document.getElementById(`cam_num_${index}`).value);
				
				// –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –≤–æ—Ä–æ—Ç
				const gateCheckboxes = document.querySelectorAll(`input[id^="gate_"][id$="_${index}"]:checked`);
				const gatePos = Array.from(gateCheckboxes).map(cb => parseInt(cb.value));
				
				// –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
				imageData[index] = {
					...imageData[index],
					cam_info: camInfo,
					cam_num: camNum,
					gate_pos: gatePos
				};

				// –û–±–Ω–æ–≤–ª—è–µ–º —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
				updateGateOrderList(index);
			}

			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–æ–∑–∏—Ü–∏–π –≤–æ—Ä–æ—Ç
			function updateGateOrderList(index) {
				const orderList = document.getElementById(`gate-order-${index}`);
				const gatePos = imageData[index]?.gate_pos || [];
				
				if (gatePos.length === 0) {
					orderList.innerHTML = '<div class="gate-order-placeholder">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Ö–æ–¥–æ–≤ –≤—ã—à–µ</div>';
					return;
				}

				// –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
				orderList.innerHTML = '';
				gatePos.forEach((gateNum, orderIndex) => {
					const orderItem = document.createElement('div');
					orderItem.className = 'gate-order-item';
					orderItem.draggable = true;
					orderItem.dataset.gateNum = gateNum;
					orderItem.dataset.orderIndex = orderIndex;
					
					orderItem.innerHTML = `
						<span class="drag-handle">‚ãÆ‚ãÆ</span>
						<div class="gate-number">${orderIndex + 1}</div>
						<div class="gate-label">–ü–æ–∑–∏—Ü–∏—è ${gateNum}</div>
						<button class="remove-gate" onclick="removeGateFromOrder(${index}, ${gateNum})">√ó</button>
					`;
					
					// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ drag and drop
					orderItem.addEventListener('dragstart', handleDragStart);
					orderItem.addEventListener('dragover', handleDragOver);
					orderItem.addEventListener('drop', handleDrop);
					orderItem.addEventListener('dragend', handleDragEnd);
					
					orderList.appendChild(orderItem);
				});
			}

			// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ drag and drop
			let draggedElement = null;

			function handleDragStart(e) {
				draggedElement = e.target;
				e.target.classList.add('dragging');
				e.dataTransfer.effectAllowed = 'move';
			}

			function handleDragOver(e) {
				e.preventDefault();
				e.dataTransfer.dropEffect = 'move';
			}

			function handleDrop(e) {
				e.preventDefault();
				
				if (draggedElement && draggedElement !== e.target) {
					const targetElement = e.target.closest('.gate-order-item');
					if (targetElement) {
						const imageIndex = parseInt(targetElement.closest('[id^="gate-order-"]').id.split('-')[2]);
						const draggedGateNum = parseInt(draggedElement.dataset.gateNum);
						const targetGateNum = parseInt(targetElement.dataset.gateNum);
						
						// –ú–µ–Ω—è–µ–º –º–µ—Å—Ç–∞–º–∏ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –º–∞—Å—Å–∏–≤–µ
						const gatePos = imageData[imageIndex].gate_pos;
						const draggedIndex = gatePos.indexOf(draggedGateNum);
						const targetIndex = gatePos.indexOf(targetGateNum);
						
						if (draggedIndex !== -1 && targetIndex !== -1) {
							[gatePos[draggedIndex], gatePos[targetIndex]] = [gatePos[targetIndex], gatePos[draggedIndex]];
							updateGateOrderList(imageIndex);
						}
					}
				}
			}

			function handleDragEnd(e) {
				e.target.classList.remove('dragging');
				draggedElement = null;
			}

			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
			function removeGateFromOrder(imageIndex, gateNum) {
				const gatePos = imageData[imageIndex].gate_pos;
				const index = gatePos.indexOf(gateNum);
				if (index !== -1) {
					gatePos.splice(index, 1);
					// –°–Ω–∏–º–∞–µ–º —á–µ–∫–±–æ–∫—Å
					const checkbox = document.getElementById(`gate_${gateNum}_${imageIndex}`);
					if (checkbox) {
						checkbox.checked = false;
					}
					updateImageData(imageIndex);
				}
			}

			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
			function removeImage(index) {
				imageData.splice(index, 1);
				renderPreview();
			}

			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ø—Ä–µ–≤—å—é
			function renderPreview() {
				preview.innerHTML = '';
				imageData.forEach((data, index) => {
					const formDiv = createImageForm(data.file, index);
					preview.appendChild(formDiv);
				});
				
				sendBtn.disabled = imageData.length === 0;
			}

			input.addEventListener('change', async (event) => {
				imageData = [];
				
				for (const file of event.target.files) {
					const reader = new FileReader();
					reader.onload = (e) => {
						const base64 = e.target.result.split(',')[1];
						
						imageData.push({
							file: file,
							image_bytes: base64,
							cam_info: 'frontal',
							cam_num: 1,
							gate_pos: [2] // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±—Ä–∞–Ω–∞ –ø–æ–∑–∏—Ü–∏—è 2
						});
						
						// –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∞–π–ª, –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é
						if (imageData.length === event.target.files.length) {
							renderPreview();
						}
					};
					reader.readAsDataURL(file);
				}
			});

			sendBtn.addEventListener('click', async () => {
				if (imageData.length === 0) return;

				sendBtn.disabled = true;
				sendBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';

				try {
					// –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
					const imagesToSend = imageData.map(data => ({
						image_bytes: data.image_bytes,
						cam_info: data.cam_info,
						cam_num: data.cam_num,
						gate_pos: data.gate_pos
					}));

					const response = await fetch('http://localhost:1338/api/v1/crowd_analysis', {
						method: 'POST',
						headers: {'Content-Type': 'application/json'},
						body: JSON.stringify({ images: imagesToSend })
					});

					const result = await response.json();
					console.log('–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', result);

					// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π
					if ('people' in result) {
						displayPeopleCount(result.people);
					}

					if ('free_entrance' in result) {
						const url = new URL(window.location);
						url.searchParams.set('entrance_suggestion', result.free_entrance);
						window.location.href = url.toString();
					}

				} catch (error) {
					alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞');
					console.error(error);
				} finally {
					sendBtn.disabled = false;
					sendBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏';
				}
			});

			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª—é–¥–µ–π
			function displayPeopleCount(peopleCount) {
				// –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –±–ª–æ–∫ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ª—é–¥–µ–π
				let peopleBlock = document.getElementById('people-count-block');
				
				if (!peopleBlock) {
					peopleBlock = document.createElement('div');
					peopleBlock.id = 'people-count-block';
					peopleBlock.style.cssText = `
						margin-top: 15px;
						padding: 16px;
						background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
						border-radius: 12px;
						color: white;
						text-align: center;
						box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
						animation: slideIn 0.5s ease-out;
					`;
					
					// –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é
					const style = document.createElement('style');
					style.textContent = `
						@keyframes slideIn {
							from {
								opacity: 0;
								transform: translateY(20px);
							}
							to {
								opacity: 1;
								transform: translateY(0);
							}
						}
					`;
					document.head.appendChild(style);
					
					// –í—Å—Ç–∞–≤–ª—è–µ–º –±–ª–æ–∫ –ø–æ—Å–ª–µ —Å–µ–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏
					document.getElementById('uploader-section').insertAdjacentElement('afterend', peopleBlock);
				}

				// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–µ–∫—Å—Ç
				let level, levelText, icon;
				if (peopleCount === 0) {
					level = 'empty';
					levelText = '–ü—É—Å—Ç–æ';
					icon = 'üü¢';
				} else if (peopleCount <= 10) {
					level = 'low';
					levelText = '–ú–∞–ª–æ –ª—é–¥–µ–π';
					icon = 'üü°';
				} else if (peopleCount <= 25) {
					level = 'medium';
					levelText = '–£–º–µ—Ä–µ–Ω–Ω–æ';
					icon = 'üü†';
				} else {
					level = 'high';
					levelText = '–ú–Ω–æ–≥–æ –ª—é–¥–µ–π';
					icon = 'üî¥';
				}

				// –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–∞
				peopleBlock.innerHTML = `
					<div style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 8px;">
						<span style="font-size: 20px;">${icon}</span>
						<span style="font-size: 18px; font-weight: 600;">${levelText}</span>
					</div>
					<div style="font-size: 24px; font-weight: 700; margin-bottom: 4px;">
						${peopleCount} ${peopleCount === 1 ? '—á–µ–ª–æ–≤–µ–∫' : peopleCount < 5 ? '—á–µ–ª–æ–≤–µ–∫–∞' : '—á–µ–ª–æ–≤–µ–∫'}
					</div>
					<div style="font-size: 14px; opacity: 0.9;">
						–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
					</div>
				`;

				// –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –≤–Ω–∏–º–∞–Ω–∏—è
				peopleBlock.style.animation = 'slideIn 0.5s ease-out, pulse 2s ease-in-out 0.5s';
				
				// –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è –ø—É–ª—å—Å–∞—Ü–∏–∏
				if (!document.getElementById('pulse-animation')) {
					const pulseStyle = document.createElement('style');
					pulseStyle.id = 'pulse-animation';
					pulseStyle.textContent = `
						@keyframes pulse {
							0%, 100% { transform: scale(1); }
							50% { transform: scale(1.02); }
						}
					`;
					document.head.appendChild(pulseStyle);
				}
			}
		</script>
<!-- ======= –ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ======= -->

    <script>
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL
      function getUrlParameter(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–≤–µ—Ä–∏
      function updateBoardingText(doorNumber) {
        const boardingText = document.getElementById('boardingText');

        if (doorNumber === 0) {
          // –†–µ–∂–∏–º "–Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
          boardingText.textContent = '–ï—â—ë –º–∞—Ä—à—Ä—É—Ç—ã';
        } else {
          // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π
          const texts = {
            1: '–°–∞–¥–∏—Ç–µ—Å—å –≤ –Ω–∞—á–∞–ª–æ –∞–≤—Ç–æ–±—É—Å–∞',
            2: '–°–∞–¥–∏—Ç–µ—Å—å –≤ —Ü–µ–Ω—Ç—Ä –∞–≤—Ç–æ–±—É—Å–∞',
            3: '–°–∞–¥–∏—Ç–µ—Å—å –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É –∞–≤—Ç–æ–±—É—Å–∞'
          };
          boardingText.textContent = texts[doorNumber] || texts[3];
        }
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–π –¥–≤–µ—Ä–∏
      function setSuggestedDoor(doorNumber) {
        // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å suggested —Å–æ –≤—Å–µ—Ö –¥–≤–µ—Ä–µ–π
        document.querySelectorAll('.bus-schematic .door').forEach(door => {
          door.classList.remove('suggested');
        });

        if (doorNumber === 0) {
          // –†–µ–∂–∏–º "–Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" - –Ω–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –¥–≤–µ—Ä–∏
          console.log('–†–µ–∂–∏–º –±–µ–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ - –∑–µ–ª—ë–Ω–∞—è —Ä–∞–º–∫–∞ —Å–∫—Ä—ã—Ç–∞');
        } else {
          // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º - –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–≤–µ—Ä—å
          const doorMap = {
            1: 'door-front',
            2: 'door-middle',
            3: 'door-back'
          };

          const selectedDoorId = doorMap[doorNumber];
          const selectedDoor = document.getElementById(selectedDoorId);

          if (selectedDoor) {
            selectedDoor.classList.add('suggested');
          }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∑–µ–ª–µ–Ω–æ–≥–æ —É–∫–∞–∑–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)
        updateEntrancePointer(doorNumber);

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
        updateBoardingText(doorNumber);
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∑–µ–ª–µ–Ω–æ–≥–æ —É–∫–∞–∑–∞—Ç–µ–ª—è
      function updateEntrancePointer(doorNumber) {
        const coach = document.querySelector('.coach');
        if (coach) {
          if (doorNumber === 0) {
            // –í —Ä–µ–∂–∏–º–µ –±–µ–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–∫—Ä—ã–≤–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å
            coach.style.setProperty('--x', '-100%');
          } else {
            const positions = {
              1: '68%',
              2: '36%',
              3: '4%'
            };
            coach.style.setProperty('--x', positions[doorNumber] || positions[2]);
          }
        }
      }

      // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
      function init() {
        // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–∑ URL
        const suggestedDoor = getUrlParameter('entrance_suggestion');

        if (suggestedDoor && ['0', '1', '2', '3'].includes(suggestedDoor)) {
          // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–≤–µ—Ä—å –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ URL
          setSuggestedDoor(parseInt(suggestedDoor));
          console.log(`–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ä–µ–∂–∏–º: ${suggestedDoor === '0' ? '–±–µ–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏' : '–¥–≤–µ—Ä—å ' + suggestedDoor}`);
        } else {
          // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–≤–µ—Ä—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∑–∞–¥–Ω—è—è –¥–≤–µ—Ä—å)
          setSuggestedDoor(3);
          console.log('–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–≤–µ—Ä—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3 (–∑–∞–¥–Ω—è—è –¥–≤–µ—Ä—å)');
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è URL
        window.addEventListener('popstate', function() {
          const newSuggestedDoor = getUrlParameter('entrance_suggestion');
          if (newSuggestedDoor && ['0', '1', '2', '3'].includes(newSuggestedDoor)) {
            setSuggestedDoor(parseInt(newSuggestedDoor));
          }
        });
      }

      // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–≥–¥–∞ DOM –∑–∞–≥—Ä—É–∂–µ–Ω
      document.addEventListener('DOMContentLoaded', init);

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      function testDoorChange(doorNumber) {
        const newUrl = `${window.location.pathname}?entrance_suggestion=${doorNumber}`;
        window.history.pushState({}, '', newUrl);
        setSuggestedDoor(doorNumber);
      }

      // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏
      window.testDoorChange = testDoorChange;

      console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:');
      console.log('testDoorChange(0) - —Ä–µ–∂–∏–º –±–µ–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ("–ï—â—ë –º–∞—Ä—à—Ä—É—Ç—ã")');
      console.log('testDoorChange(1) - –¥–ª—è –ø–µ—Ä–µ–¥–Ω–µ–π –¥–≤–µ—Ä–∏ (—Å–ø—Ä–∞–≤–∞)');
      console.log('testDoorChange(2) - –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π –¥–≤–µ—Ä–∏ (—Ü–µ–Ω—Ç—Ä)');
      console.log('testDoorChange(3) - –¥–ª—è –∑–∞–¥–Ω–µ–π –¥–≤–µ—Ä–∏ (—Å–ª–µ–≤–∞)');
    </script>
  </body>
</html>